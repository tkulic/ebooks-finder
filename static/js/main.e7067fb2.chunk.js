(this["webpackJsonpebooks-finder"]=this["webpackJsonpebooks-finder"]||[]).push([[0],{11:function(e,t,s){},13:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(6),n=s.n(c),l=(s(11),s(2)),r=s(0);function i(){return Object(r.jsx)("header",{children:Object(r.jsx)("h1",{children:Object(r.jsx)("a",{href:"/",children:"eFree. eRead."})})})}var o=s(3),b=s(5);function j(e){var t=Object(a.useState)({textInput:"",resultsCount:"10",publicationType:"all",sortOrder:"relevance"}),s=Object(l.a)(t,2),c=s[0],n=s[1],i=Object(a.useState)(!1),j=Object(l.a)(i,2),u=j[0],d=j[1],h=Object(a.useRef)(null);function p(e){var t=e.target,s=t.name,a=t.value;n(Object(b.a)(Object(b.a)({},c),{},Object(o.a)({},s,a)))}return Object(a.useEffect)((function(){h.current.focus()}),[]),console.log(c),Object(r.jsx)("div",{className:"search-form",children:Object(r.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c.textInput&&(e.fetchData(c),d(!1))},children:[Object(r.jsxs)("div",{className:"search-bar",children:[Object(r.jsx)("input",{type:"text",id:"query",name:"textInput",placeholder:"type here","aria-label":"Search by title, author or subject.",title:"Search by title, author or subject.",value:c.textInput,onChange:p,ref:h,required:!0}),Object(r.jsx)("button",{type:"reset",className:"reset-btn",onClick:function(){n({textInput:"",resultsCount:"10",publicationType:"all",sortOrder:"relevance"})},children:"\u2a09"}),Object(r.jsx)("button",{type:"submit",className:"search-btn",children:"Search"})]}),!u&&Object(r.jsx)("button",{type:"button",className:"toggle-filters-btn",onClick:function(e){d(!0)},children:"\u25b9Filters"}),Object(r.jsxs)("fieldset",{className:"search-options ".concat(u?"visible":""),children:[Object(r.jsxs)("div",{className:"search-option",children:[Object(r.jsx)("legend",{children:"Number of results: "}),Object(r.jsxs)("label",{className:"radio-label",children:[Object(r.jsx)("input",{type:"radio",name:"resultsCount",value:"10",checked:"10"===c.resultsCount,onChange:p}),"10"]}),Object(r.jsxs)("label",{className:"radio-label",children:[Object(r.jsx)("input",{type:"radio",name:"resultsCount",value:"20",checked:"20"===c.resultsCount,onChange:p}),"20"]}),Object(r.jsxs)("label",{className:"radio-label",children:[Object(r.jsx)("input",{type:"radio",name:"resultsCount",value:"30",checked:"30"===c.resultsCount,onChange:p}),"30"]}),Object(r.jsxs)("label",{className:"radio-label",children:[Object(r.jsx)("input",{type:"radio",name:"resultsCount",value:"40",checked:"40"===c.resultsCount,onChange:p}),"40"]})]}),Object(r.jsxs)("div",{className:"search-option",children:[Object(r.jsx)("legend",{children:"Publication type: "}),Object(r.jsxs)("label",{className:"radio-label",children:[Object(r.jsx)("input",{type:"radio",name:"publicationType",value:"all",checked:"all"===c.publicationType,onChange:p}),"All"]}),Object(r.jsxs)("label",{className:"radio-label",children:[Object(r.jsx)("input",{type:"radio",name:"publicationType",value:"books",checked:"booka"===c.publicationType,onChange:p}),"Books"]}),Object(r.jsxs)("label",{className:"radio-label",children:[Object(r.jsx)("input",{type:"radio",name:"publicationType",value:"magazines",checked:"magazines"===c.publicationType,onChange:p}),"Magazines"]})]}),Object(r.jsxs)("div",{className:"search-option",children:[Object(r.jsx)("legend",{children:"Sort by: "}),Object(r.jsxs)("label",{className:"radio-label",children:[Object(r.jsx)("input",{type:"radio",name:"sortOrder",value:"relevance",checked:"relevance"===c.sortOrder,onChange:p}),"Relevance"]}),Object(r.jsxs)("label",{className:"radio-label",children:[Object(r.jsx)("input",{type:"radio",name:"sortOrder",value:"newest",checked:"newest"===c.sortOrder,onChange:p}),"Newest"]})]})]})]})})}function u(e){var t=e.bookData;return Object(r.jsxs)("div",{className:"book-card",children:[Object(r.jsx)("a",{href:t.googleBooksLink,children:Object(r.jsx)("h2",{className:"book-title",target:"_blank",rel:"noreferrer",children:t.title})}),Object(r.jsxs)("div",{className:"flex-wrapper",children:[Object(r.jsxs)("div",{className:"col-left",children:[Object(r.jsx)("p",{children:Object(r.jsx)("span",{className:"light-text",children:t.description})}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{className:"light-text",children:"Author:"})," ",t.authors]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{className:"light-text",children:"Publisher:"})," ",t.publisher]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{className:"light-text",children:"Published:"})," ",t.publishedDate]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{className:"light-text",children:"ISBN:"})," ",t.ISBN]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{className:"light-text",children:"Pages:"})," ",t.pageCount]})]}),Object(r.jsx)("div",{className:"col-right",children:Object(r.jsx)("a",{href:t.googleBooksLink,target:"_blank",rel:"noreferrer",children:Object(r.jsx)("img",{src:t.thumbnail,alt:"book cover"})})})]})]})}function d(e){var t=e.booksData;return Object(r.jsx)("div",{className:"books-grid",children:t.map((function(e){return Object(r.jsx)(u,{bookData:e},e.id)}))})}var h=s.p+"static/media/loading-spinner.10d1208f.gif",p=s.p+"static/media/book-placeholder.785232d9.svg";function O(){return Object(r.jsx)("footer",{children:Object(r.jsxs)("p",{children:["Powered by ",Object(r.jsx)("a",{href:"https://developers.google.com/books",target:"_blank",rel:"noreferrer",children:"Google Books API"})]})})}function x(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),s=t[0],c=t[1],n=Object(a.useState)(""),o=Object(l.a)(n,2),b=o[0],u=o[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(i,{}),Object(r.jsxs)("div",{className:"wrapper",children:[Object(r.jsx)(j,{fetchData:function(e){console.log(e.eBooksonly),console.log(e.textInput);var t=e.eBooksonly?"&filter=free-ebooks":"";console.log(t),u(Object(r.jsx)("img",{src:h,alt:"loading spinner",className:"loading-spinner"})),fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(e.textInput,"&maxResults=").concat(e.resultsCount,"&printType=").concat(e.publicationType,"&orderBy=").concat(e.sortOrder).concat(t,"&filter=free-ebooks")).then((function(e){return e.json()})).then((function(e){c(function(e){return e?e.map((function(e){var t=e.id,s=e.volumeInfo;return{id:t,title:s.title,description:"subtitle"in s?s.subtitle:"No description",authors:"authors"in s?s.authors:"N/A",publisher:"publisher"in s?s.publisher:"N/A",publishedDate:"publishedDate"in s?s.publishedDate:"N/A",ISBN:"industryIdentifiers"in s?s.industryIdentifiers[0].identifier:"N/A",pageCount:"pageCount"in s?s.pageCount:"N/A",thumbnail:"imageLinks"in s?s.imageLinks.thumbnail:p,googleBooksLink:s.infoLink}})):[]}(e.items)),u("")})).catch((function(e){console.log(e.message),u(e.message),c([])}))}}),Object(r.jsx)(d,{booksData:s}),Object(r.jsx)("p",{className:"message",children:b}),Object(r.jsx)(O,{})]})]})}n.a.render(Object(r.jsx)(x,{}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.e7067fb2.chunk.js.map